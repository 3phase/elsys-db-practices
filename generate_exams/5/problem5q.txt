create database problem5;
use problem5;

create table article (
   id int unsigned not null primary key auto_increment,
	 published_on date,
	 name varchar(20)
);

create table category (
   id int unsigned not null primary key auto_increment,
	 description varchar(20),
	 name varchar(20)
);

create table user (
   id int unsigned not null primary key auto_increment,
	 age int,
	 created_on date,
	 password varchar(20)
);

create table tag (
   id int unsigned not null primary key auto_increment,
	 description varchar(20),
	 name varchar(20)
);

create table category_article (
    id int unsigned not null primary key auto_increment,
    article_id int unsigned not null,
    category_id int unsigned not null
);

alter table user add foreign key (id) REFERENCES article(id);
create table user_tag (
    id int unsigned not null primary key auto_increment,
    tag_id int unsigned not null,
    user_id int unsigned not null
);

insert into article (id,published_on,name) values
	(1, '2014-03-05', 'efefsefse'),
  (2, '2014-05-06', 'efesfsee');

insert into category (id,description,name) values
	(1,'sefef', 'fesesf'),
  (2, 'sesfesef', 'drfhtft');

insert into user (id,age,created_on,password) values
	(1, 21, '2014-03-25', 'efafee'),
  (2, 23, '2014-02-01', 'okjoljl');

insert into tag (id,description,name) values
	(1, 'sefsefse', 'we34wyg'),
  (2, 'e4grdgr', 'erdhdrh');

insert into category_article(id, article_id, category_id) values
  (1, 1, 2),
  (2, 2, 1);

insert into user_tag(id, tag_id, user_id) values
  (1, 2, 1),
  (2, 1, 2);

select article.* from user_tag join tag on user_tag.tag_id=tag.id join article on user_tag.user_id= article.id where tag.name = 'we34wyg';


create table User_part1 (id int unsigned not null auto_increment, age int, primary key (id));
create table User_part2 (id int unsigned not null auto_increment, created_on date, password varchar(20), primary key (id));
insert into User_part1 (age) select age from user;
insert into User_part2 (created_on, password) select created_on, password from user;
drop table user;

 select category.* from category_article join User_part1 on User_part1.id = category_article.article_id join category on category.id = category_article.category_id where User_part1.id =1;


