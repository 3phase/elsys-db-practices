create database problem8;
use problem8;

create table article (
   id int unsigned not null primary key auto_increment,
	 published_on date,
	 price double
);

create table category (
   id int unsigned not null primary key auto_increment,
	 date_created_on date,
	 name varchar(20)
);

create table user (
   id int unsigned not null primary key auto_increment,
	 name varchar(20),
	 password varchar(20),
	 created_on date
);

create table tag (
   id int unsigned not null primary key auto_increment,
	 priority int,
	 name varchar(20)
);

alter table tag add column article_id int unsigned not null;
alter table article add column category_id int unsigned not null;
alter table category add column user_id int unsigned not null;

insert into article (id,published_on,price, category_id) values
	(1, '2014-03-02', 20, 1),
  (2, '2011-02-05', 21, 2);

insert into category (id,date_created_on,name, user_id) values
	(1, '2013-04-05-08', 'sesefse', 1),
  (2, '2012-05-03', 'yuuyguyguy', 2);

insert into user (id,name,password,created_on) values
	(1, 'sesesef', '354546', '2014-02-06'),
  (2, 'fesefe', '3545', '2014-02-06');

insert into tag (id,priority,name, article_id) values
	(1, 21, 'efsef', 2),
  (2, 25, 'efsefgr', 1);

select article.* from category join user on user.id=category.user_id join article on article.category_id=category.id where user.name = 'sesesef';

create table category_part1 (id int unsigned not null auto_increment, name varchar(20), primary key (id));
create table category_part2 (id int unsigned not null auto_increment, date_created_on date,user_id int, primary key (id));
insert into category_part1 (name) select name from category;
insert into category_part2 (date_created_on, user_id ) select date_created_on, user_id from category;
drop table category;

 select tag.* from article join tag on article.id = tag.article_id join category_part1 on category_part1.id = article.category_id where category_part1.name= 'yuuyguyguy';
