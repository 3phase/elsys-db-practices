create database problem3;
use problem 3;

create table article (
   id int unsigned not null primary key auto_increment,
	 published_on date,
	 name varchar(20)
);
create table category (
   id int unsigned not null primary key auto_increment,
	 description varchar(20),
	 date_created_on date
);

create table user (
   id int unsigned not null primary key auto_increment,
	 name varchar(20),
	 age int,
	 created_on date
);

create table tag (
   id int unsigned not null primary key auto_increment,
	 priority int,
	 name varchar(20)
);

alter table article add column user_id int unsigned not null;
alter table category add column tag_id int unsigned not null;
alter table category add column user_id int unsigned not null;

insert into article (id,published_on,name, user_id) values
	(1, '2014-03-02', 'faefsef', 1),
  (2, '2013-04-06', 'seesfsef', 2);

insert into category (id,description,date_created_on, tag_id, user_id) values
	(1, 'fesefes', 2014-03-05, 1, 2),
  (2, 'efefsef', 2014-03-06, 2, 1);

insert into user (id,name,age,created_on) values
	(1, 'fseesf', 21, 2013-05-04),
  (2, 'fessefsef', 23, 2014-07-08);

insert into tag (id,priority,name) values
	(1, 2, 'fsefse'),
  (2, 40, 'seeferf');

select category.* from user join category on user.id = category.user_id join article on user.id = article.user_id where article.name = 'faefsef';

create table User_part1 (id int unsigned not null auto_increment, age int, primary key (id));
create table User_part2 (id int unsigned not null auto_increment, name varchar(20), created_on date, primary key (id));
insert into User_part1 (age) select age FROM user;
insert into User_part2 (name, created_on) select name, created_on from user;
drop table user;

select tag.* from category join tag on category.tag_id=tag.id join User_part2 on User_part2.id = category.user_id where User_part2.name = 'fseesf';
