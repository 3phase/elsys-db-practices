create database problem9;
use problem9;

create table article (
   id int unsigned not null primary key auto_increment,
	 price double,
	 name varchar(20)
);

create table category (
   id int unsigned not null primary key auto_increment,
	 description varchar(20),
	 name varchar(20)
);

create table user (
   id int unsigned not null primary key auto_increment,
	 password varchar(20),
	 name varchar(20),
	 age int
);

create table tag (
   id int unsigned not null primary key auto_increment,
	 description varchar(20),
	 name varchar(20)
);

alter table category add foreign key (id_tag) REFERENCES tag(id);
alter table user add foreign key (id) REFERENCES article(id);
alter table tag add column user_id int unsigned not null;
insert into article (id,price,name) values
	(1, 20, 'fesefs'),
  (2, 21, 'sefes');

insert into category (id,description,name) values
	(1, 'sertffth', 'tiyukh'), 
  (2, 'ewedx', 't7itgh');

insert into user (id,password,name,age) values
	(1, '234', 'grdf', 21),
  (2, '123456', 'sges', 23);

insert into tag (id,description,name) values
	(1, 'gsgrs', 'ewsgfd'), 
  (2, 'sefeg', 'efdxc');

select user.* from tag join user on user.id=tag.user_id join category on tag.id = category.id where category.name = 'ewedx';

create table tag_part1 (id int unsigned not null auto_increment, description varchar(20), primary key (id));
create table tag_part2 (id int unsigned not null auto_increment, name varchar(20), user_id int, primary key (id));
insert into tag_part1 (description) select description FROM tag;
insert into tag_part2 (name, user_id) select name, user_id from tag;

select article.* from tag_part2 join article on tag_part2.user_id = article.id where tag_part2.name = 'ewsgfd';

